
# Full version paper is: [par2qo.pdf](https://github.com/Hap-Hugh/PAR2QO/blob/main/par2qo.pdf)

## PAR2QO: Parametric Penalty-Aware Robust Query Optimization


This is the GitHub repository for PAR2QO's submission. The full version paper is: [par2qo.pdf](https://github.com/Hap-Hugh/PAR2QO/blob/main/par2qo.pdf)

This repository contains the code and resources for **PAR2QO**, a system for **Parametric Penalty-Aware Robust Query Optimization**. PAR2QO integrates robust plan selection into **Parametric Query Optimization (PQO)** to enhance both efficiency and stability. 



## Preparation
1. Download PostgreSQL 16.2 and follow the steps [here](https://github.com/Hap-Hugh/PG16) to config Postgres (16.2)  or inject cardinality and query plans into the optimizer. 
2. Install [pg_hint_plan](https://github.com/ossc-db/pg_hint_plan/releases) (the version that works with PostgreSQL 16).
3. Use pg_ctl to initdb and modify the postgresql.conf file. Our conf file is present [here](https://github.com/Hap-Hugh/PG16), you can directly copy and paste this file to your database directory generated by Postgres <code>initdb</code>.

4. Make databases (JOB and DSB)
- JOB: please follow [Balsa](<https://github.com/balsa-project/balsa>) to download and load data to your database
- DSB: please follow [dsb-linux-pg](https://github.com/Hap-Hugh/dsb-linux-pg/tree/main/scripts) to generate data and workload

## ðŸš€ Running PAR2QO

1. Open `par2qo_run.py` and adjust the file configurations as needed.
2. Run PAR2QO with:
   ```sh
   python par2qo_run.py
